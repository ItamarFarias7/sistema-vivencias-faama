<!DOCTYPE html>
<html lang="pt-BR">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Inscri√ß√£o e Sorteio</title>
  <link rel="stylesheet" href="/css/style.css">
</head>

<body>
  <div class="botao-voltar">
    <a href="/" style="font-size: 12px; color: #555; text-decoration: none; font-weight: bold;">‚Üê Voltar para o Portal
      Inicial</a>
  </div>

  <div class="container">
    <div class="card">
      <div class="card-header">
        <h2>Cadastro de Equipes</h2>
        <p>Preencha seus dados para ser alocado</p>
      </div>

      <% if (typeof erro !=='undefined' && erro) { %>
        <div class="alert">
          <%= erro %>
        </div>
        <% } %>

          <form action="/inscrever" method="POST">
            <div class="form-group">
              <label class="form-label"><strong>Nome Completo</strong></label>
              <input type="text" name="nome" class="form-control" required
                placeholder="Ex: Jo√£o da Silva (NOME COMPLETO)">
            </div>

            <div class="form-group">
              <label class="form-label">E-mail Institucional ou Pessoal</label>
              <input type="email" name="email" class="form-control" required placeholder="aluno@email.com">
            </div>

            <div class="form-group">
              <label class="form-label">Curso</label>
              <select name="curso" class="form-control" required>
                <option value="">Selecione...</option>
                <option value="ADS">An√°lise e Desenv. de Sistemas (ADS)</option>
                <option value="Pedagogia">Pedagogia</option>
                <option value="Psicologia">Psicologia</option>
                <option value="Enfermagem">Enfermagem</option>
                <option value="Direito">Direito</option>
              </select>
            </div>

            <div class="row">
              <div class="form-group col">
                <label class="form-label">Turno</label>
                <select name="turno" class="form-control" required>
                  <option value="">Selecione...</option>
                  <option value="Manh√£">Manh√£</option>
                  <option value="Tarde">Tarde</option>
                  <option value="Noite">Noite</option>
                </select>
              </div>

              <div class="form-group col">
                <label class="form-label">Per√≠odo</label>
                <select name="periodo" class="form-control" required>
                  <option value="">Selecione...</option>
                  <% for(let i=1; i<=10; i++) { %>
                    <option value="<%= i %>">
                      <%= i %>¬∫ Per√≠odo
                    </option>
                    <% } %>
                </select>
              </div>
            </div>

            <div class="form-group">
              <label class="form-label">Eixo de Atua√ß√£o</label>
              <select name="eixo_id" class="form-control" required>
                <option value="">Selecione o Eixo...</option>
                <% eixos.forEach(function(eixo) { %>
                  <option value="<%= eixo.id %>">
                    <%= eixo.nome %>
                  </option>
                  <% }); %>
              </select>
            </div>

            <button type="submit" class="btn-primary">Realizar Sorteio Autom√°tico</button>
          </form>
    </div>

    <div class="card" style="margin-top: 40px; padding: 3rem;">
      <h2 style="text-align: center; margin-bottom: 10px;">Equipes Formadas</h2>
      <p style="text-align: center; color: #666; font-size: 1.4rem; margin-bottom: 30px;">Veja quem j√° est√° em cada
        equipe</p>

      <% Object.keys(relatorio).forEach(function(nomeEixo) { %>
        <h3 style="border-bottom: 2px solid #eee; padding-bottom: 10px; color: #555; margin-top: 30px;">üìç <%= nomeEixo
            %>
        </h3>

        <div
          style="display: grid; grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); gap: 20px; margin-top: 20px;">
          <% relatorio[nomeEixo].forEach(function(grupo) { %>
            <div
              style="background: #f9f9f9; border-top: 4px solid var(--secondary-color); padding: 20px; border-radius: 8px; box-shadow: 0 2px 5px rgba(0,0,0,0.05);">

              <h4
                style="margin: 0 0 15px 0; display: flex; justify-content: space-between; align-items: center; color: var(--primary-color); font-size: 1.6rem;">
                <%= grupo.nome_grupo %>
                  <span
                    style="background: #e9ecef; padding: 4px 10px; border-radius: 12px; font-size: 1.2rem; font-weight: bold; color: #333;">
                    <%= grupo.total %>/10
                  </span>
              </h4>

              <% if (grupo.alunos.length> 0) { %>
                <ul style="list-style: none; padding: 0; margin: 0; font-size: 1.4rem;">
                  <% grupo.alunos.forEach(function(aluno) { %>
                    <li
                      style="padding: 8px 0; border-bottom: 1px solid #eee; display: flex; justify-content: space-between; align-items: center;">
                      <strong>
                        <%= aluno.nome %>
                      </strong>
                      <span style="color: #888; font-size: 1.2rem;">
                        <%= aluno.curso %>
                      </span>
                    </li>
                    <% }); %>
                </ul>
                <% } else { %>
                  <p style="font-size: 1.3rem; color: #999; font-style: italic; text-align: center; margin-top: 15px;">
                    Aguardando inscritos...</p>
                  <% } %>

            </div>
            <% }); %>
        </div>
        <% }); %>
    </div>

  </div>
</body>

</html>